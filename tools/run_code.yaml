identity:
  name: run_code
  author: jingfelix
  label:
    en_US: Run Code
    zh_Hans: 代码运行
    pt_BR: Run Code
    ja_JP: Run Code
description:
  human:
    en_US: Execute code in a specified language and fetch output or files from a secure sandbox environment.
    zh_Hans: 在沙箱环境中以指定语言执行代码，并获取输出或文件。
    pt_BR: Execute código em uma linguagem especificada e busque a saída ou arquivos de um ambiente seguro de sandbox.
    ja_JP: 指定された言語でコードを実行し、安全なサンドボックス環境から出力またはファイルを取得します。
  llm: Execute user-provided code in a specified programming language inside a secure sandbox. Optionally fetch files generated by the code. Returns execution result, output, and files if requested.
parameters:
  - name: code
    type: string
    required: true
    label:
      en_US: Code
      zh_Hans: 代码
    human_description:
      en_US: The code to execute in the sandbox.
      zh_Hans: 需要在沙箱中执行的代码。
    llm_description: The code to be executed in the specified language.
    form: llm
  - name: language
    type: string
    required: true
    label:
      en_US: Language
      zh_Hans: 语言
    human_description:
      en_US: The programming language of the code. Please refer to https://github.com/bytedance/SandboxFusion for supported languages.
      zh_Hans: 代码所用的编程语言。请参考 https://github.com/bytedance/SandboxFusion 获取支持的语言列表。
    llm_description: The programming language in which the code is written. Must be one of the supported languages in ["python", "cpp", "nodejs", "go", "go_test", "java", "php", "csharp", "bash", "typescript", "sql", "rust", "cuda", "lua", "R", "perl", "D_ut", "ruby", "scala", "julia", "pytest", "junit", "kotlin_script", "jest", "verilog", "python_gpu", "lean", "swift", "racket"]
    form: llm
  - name: timeout
    type: number
    required: false
    label:
      en_US: Timeout (seconds)
      zh_Hans: 超时时间（秒）
    human_description:
      en_US: Optional timeout for code execution in seconds, default is no timeout.
      zh_Hans: 可选，代码执行的超时时间（秒），默认不设置超时。
    llm_description: Optional timeout for code execution, in seconds. If not specified, there is no timeout.
    form: llm
  - name: files
    type: files
    required: false
    label:
      en_US: Files to upload
      zh_Hans: 上传的文件
    human_description:
      en_US: Optional files to upload to the sandbox before execution.
      zh_Hans: 可选，执行前需要上传到沙箱的文件。
    llm_description: Optional files to upload to the sandbox before code execution.
    form: llm
  - name: fetch_files
    type: string
    required: false
    label:
      en_US: Fetch Files
      zh_Hans: 获取文件
    human_description:
      en_US: Comma-separated list of file names to fetch after execution.
      zh_Hans: 执行后需要获取的文件名列表，逗号分隔。
    llm_description: Comma-separated file names to fetch from the sandbox after code execution.
    form: llm
extra:
  python:
    source: tools/run_code.py
